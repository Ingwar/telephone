{% extends "base.html" %}
{% load static %}


{% block styling %}
  <link href="{% static 'inspector/css/inspect.css' %}" rel="stylesheet">
{% endblock styling %}


{% block navbar %}
    <li class="btn btn-default pull-right" role="presentation">
      <a id="id_games_list" href="{% url 'games_list' %}">
        <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
        All Games
      </a>
    </li>
{% endblock navbar %}


{% block body %}
  <h1>{{ game }}</h1>
  <svg class="focus">
  </svg>
  <svg class="tree">
  </svg>
{% endblock body %}

{% block javascript %}
  <script src="{% static 'd3/d3.min.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'colorbrewer/colorbrewer.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'underscore/underscore-min.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'backbone/backbone.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'SoundManager2/script/soundmanager2.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'grunt/js/ajax.js' %}" type="text/javascript"></script>
  <script src="{% static 'inspector/js/tree.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'inspector/js/focus.js' %}" type="text/JavaScript"></script>
  <script src="{% static 'system.js/dist/system.src.js' %}" type="text/JavaScript"></script>
  <script>

System.config({
  baseURL: '{% static '' %}',
  map: {
    traceur: 'traceur/traceur.js',
    inspector: 'inspector/js'
  },
  transpiler: "traceur"
});
// Draw the gameTree once soundManager is ready

System.import('inspector/app.js');

var gameTree = {{ game_tree | safe }};

_.extend(gameTree, Backbone.Events);

soundManager.setup({
  url: "{% static 'SoundManager2/swf' %}",
  onready: function() {
    gameTree.trigger("ready");
  }
});

gameTree.once("ready", function() { drawMessageTree(gameTree); });
  </script>
{% endblock javascript %}
